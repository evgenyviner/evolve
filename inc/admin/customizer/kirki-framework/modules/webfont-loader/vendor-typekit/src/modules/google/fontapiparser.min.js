goog.provide("webfont.modules.google.FontApiParser");goog.require("webfont.Font");webfont.modules.google.FontApiParser=function(a){this.fontFamilies_=a;this.parsedFonts_=[];this.fontTestStrings_={}};webfont.modules.google.FontApiParser.INT_FONTS={latin:webfont.FontWatchRunner.DEFAULT_TEST_STRING,"latin-ext":"\u00E7\u00F6\u00FC\u011F\u015F",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"};webfont.modules.google.FontApiParser.WEIGHTS={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"};webfont.modules.google.FontApiParser.STYLES={i:"i",italic:"i",n:"n",normal:"n"};webfont.modules.google.FontApiParser.VARIATION_MATCH=new RegExp("^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$");goog.scope(function(){var a=webfont.modules.google.FontApiParser,b=webfont.Font;a.prototype.parse=function(){var d=this.fontFamilies_.length;for(var h=0;h<d;h++){var c=this.fontFamilies_[h].split(":");var l=c[0].replace(/\+/g," ");var m=["n4"];if(c.length>=2){var e=this.parseVariations_(c[1]);if(e.length>0){m=e}if(c.length==3){var k=this.parseSubsets_(c[2]);if(k.length>0){var n=a.INT_FONTS[k[0]];if(n){this.fontTestStrings_[l]=n}}}}if(!this.fontTestStrings_[l]){var f=a.INT_FONTS[l];if(f){this.fontTestStrings_[l]=f}}for(var g=0;g<m.length;g+=1){this.parsedFonts_.push(new b(l,m[g]))}}};a.prototype.generateFontVariationDescription_=function(e){if(!e.match(/^[\w-]+$/)){return""}var d=e.toLowerCase();var c=a.VARIATION_MATCH.exec(d);if(c==null){return""}var g=this.normalizeStyle_(c[2]);var f=this.normalizeWeight_(c[1]);return[g,f].join("")};a.prototype.normalizeStyle_=function(c){if(c==null||c==""){return"n"}return a.STYLES[c]};a.prototype.normalizeWeight_=function(c){if(c==null||c==""){return"4"}var d=a.WEIGHTS[c];if(d){return d}if(isNaN(c)){return"4"}return c.substr(0,1)};a.prototype.parseVariations_=function(j){var c=[];if(!j){return c}var h=j.split(",");var g=h.length;for(var f=0;f<g;f++){var e=h[f];var d=this.generateFontVariationDescription_(e);if(d){c.push(d)}}return c};a.prototype.parseSubsets_=function(c){var d=[];if(!c){return d}return c.split(",")};a.prototype.getFonts=function(){return this.parsedFonts_};a.prototype.getFontTestStrings=function(){return this.fontTestStrings_}});