goog.provide("webfont.DomHelper");webfont.DomHelper=function(a,b){this.mainWindow_=a;this.loadWindow_=b||a;this.protocol_;this.document_=this.loadWindow_.document};goog.scope(function(){var a=webfont.DomHelper;a.CAN_WAIT_STYLESHEET=!!window.FontFace;a.prototype.createElement=function(e,d,c){var f=this.document_.createElement(e);if(d){for(var b in d){if(d.hasOwnProperty(b)){if(b=="style"){this.setStyle(f,d[b])}else{f.setAttribute(b,d[b])}}}}if(c){f.appendChild(this.document_.createTextNode(c))}return f};a.prototype.insertInto=function(c,d){var b=this.document_.getElementsByTagName(c)[0];if(!b){b=document.documentElement}b.insertBefore(d,b.lastChild);return true};a.prototype.whenBodyExists=function(c){var b=this;if(b.document_.body){c()}else{if(b.document_.addEventListener){b.document_.addEventListener("DOMContentLoaded",c)}else{b.document_.attachEvent("onreadystatechange",function(){if(b.document_.readyState=="interactive"||b.document_.readyState=="complete"){c()}})}}};a.prototype.removeElement=function(b){if(b.parentNode){b.parentNode.removeChild(b);return true}return false};a.prototype.appendClassName=function(c,b){this.updateClassName(c,[b])};a.prototype.removeClassName=function(c,b){this.updateClassName(c,null,[b])};a.prototype.updateClassName=function(h,l,b){var m=l||[],g=b||[];var c=h.className.split(/\s+/);for(var f=0;f<m.length;f+=1){var n=false;for(var d=0;d<c.length;d+=1){if(m[f]===c[d]){n=true;break}}if(!n){c.push(m[f])}}var k=[];for(var f=0;f<c.length;f+=1){var n=false;for(var d=0;d<g.length;d+=1){if(c[f]===g[d]){n=true;break}}if(!n){k.push(c[f])}}h.className=k.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")};a.prototype.hasClassName=function(g,c){var f=g.className.split(/\s+/);for(var d=0,b=f.length;d<b;d++){if(f[d]==c){return true}}return false};a.prototype.setStyle=function(c,b){c.style.cssText=b};a.prototype.getMainWindow=function(){return this.mainWindow_};a.prototype.getLoadWindow=function(){return this.loadWindow_};a.prototype.getHostName=function(){return this.getLoadWindow().location.hostname||this.getMainWindow().location.hostname};a.prototype.createStyle=function(b){var c=this.createElement("style");c.setAttribute("type","text/css");if(c.styleSheet){c.styleSheet.cssText=b}else{c.appendChild(document.createTextNode(b))}return c};a.prototype.loadStylesheet=function(b,l,e){var k=this.createElement("link",{rel:"stylesheet",href:b,media:(e?"only x":"all")});var g=this.document_.styleSheets,h=false,j=!e,i=null,m=l||null;function d(){if(m&&h&&j){m(i);m=null}}if(a.CAN_WAIT_STYLESHEET){k.onload=function(){h=true;d()};k.onerror=function(){h=true;i=new Error("Stylesheet failed to load");d()}}else{setTimeout(function(){h=true;d()},0)}function c(o){for(var n=0;n<g.length;n++){if(g[n].href&&g[n].href.indexOf(b)!==-1){return o()}}setTimeout(function(){c(o)},0)}function f(p){for(var n=0;n<g.length;n++){if(g[n].href&&g[n].href.indexOf(b)!==-1&&g[n].media){var o=g[n].media;if(o==="all"||(o.mediaText&&o.mediaText==="all")){return p()}}}setTimeout(function(){f(p)},0)}this.insertInto("head",k);if(e){c(function(){k.media="all";f(function(){j=true;d()})})}return k};a.prototype.loadScript=function(g,e,b){var f=this.document_.getElementsByTagName("head")[0];if(f){var d=this.createElement("script",{src:g});var c=false;d.onload=d.onreadystatechange=function(){if(!c&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){c=true;if(e){e(null)}d.onload=d.onreadystatechange=null;if(d.parentNode.tagName=="HEAD"){f.removeChild(d)}}};f.appendChild(d);setTimeout(function(){if(!c){c=true;if(e){e(new Error("Script load timeout"))}}},b||5000);return d}return null}});