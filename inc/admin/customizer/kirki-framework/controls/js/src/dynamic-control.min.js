(function(){wp.customize.kirkiDynamicControl=wp.customize.Control.extend({initialize:function(d,b){var c=this,a=b||{};a.params=a.params||{};if(!a.params.type){a.params.type="kirki-generic"}if(!a.params.content){a.params.content=jQuery("<li></li>");a.params.content.attr("id","customize-control-"+d.replace(/]/g,"").replace(/\[/g,"-"));a.params.content.attr("class","customize-control customize-control-"+a.params.type)}c.propertyElements=[];wp.customize.Control.prototype.initialize.call(c,d,a)},_setUpSettingRootLinks:function(){var b=this,a=b.container.find("[data-customize-setting-link]");a.each(function(){var c=jQuery(this);wp.customize(c.data("customizeSettingLink"),function(e){var d=new wp.customize.Element(c);b.elements.push(d);d.sync(e);d.set(e())})})},_setUpSettingPropertyLinks:function(){var b=this,a;if(!b.setting){return}a=b.container.find("[data-customize-setting-property-link]");a.each(function(){var e=jQuery(this),d,c=e.data("customizeSettingPropertyLink");d=new wp.customize.Element(e);b.propertyElements.push(d);d.set(b.setting()[c]);d.bind(function(g){var f=b.setting();if(g===f[c]){return}f=_.clone(f);f[c]=g;b.setting.set(f)});b.setting.bind(function(f){if(f[c]!==d.get()){d.set(f[c])}})})},ready:function(){var a=this;a._setUpSettingRootLinks();a._setUpSettingPropertyLinks();wp.customize.Control.prototype.ready.call(a);a.deferred.embedded.done(function(){a.initKirkiControl(a)})},embed:function(){var b=this,a=b.section();if(!a){return}wp.customize.section(a,function(c){if("kirki-expanded"===c.params.type||c.expanded()||wp.customize.settings.autofocus.control===b.id){b.actuallyEmbed()}else{c.expanded.bind(function(d){if(d){b.actuallyEmbed()}})}})},actuallyEmbed:function(){var a=this;if("resolved"===a.deferred.embedded.state()){return}a.renderContent();a.deferred.embedded.resolve()},focus:function(a){var b=this;b.actuallyEmbed();wp.customize.Control.prototype.focus.call(b,a)},initKirkiControl:function(a){if("undefined"!==typeof kirki.control[a.params.type]){kirki.control[a.params.type].init(a);return}this.container.on("change keyup paste click","input",function(){a.setting.set(jQuery(this).val())})}})}());_.each(kirki.control,function(b,a){wp.customize.controlConstructor[a]=wp.customize.kirkiDynamicControl.extend({})});